--// Tunn - H·ªÜ TH·ªêNG SI√äU C·∫§P v2.6 (UPDATE BY GEMINI)
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local camera = workspace.CurrentCamera

-- GUI Setup
local gui = Instance.new("ScreenGui", player.PlayerGui)
gui.ResetOnSpawn = false

-- Icon C√° üêü
local icon = Instance.new("TextButton", gui)
icon.Size = UDim2.new(0,35,0,35); icon.Position = UDim2.new(0,10,0,10); icon.Text = "üêü"; icon.TextSize = 20
icon.BackgroundColor3 = Color3.fromRGB(25,25,25); icon.Active = true; icon.Draggable = true
Instance.new("UICorner", icon).CornerRadius = UDim.new(1,0)
local iS = Instance.new("UIStroke", icon); iS.Thickness = 2

-- Frame Tunn
local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0,200,0,380); frame.Position = UDim2.new(0,60,0,60) -- TƒÉng chi·ªÅu cao t√≠ nh√©
frame.BackgroundColor3 = Color3.fromRGB(15,15,15); frame.Visible = false; frame.Active = true; frame.Draggable = true
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,10)
local fS = Instance.new("UIStroke", frame); fS.Thickness = 2; fS.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1,0,0,35); title.Text = "Tunn"; title.BackgroundTransparency = 1; title.Font = Enum.Font.SourceSansBold; title.TextSize = 18

-- RGB Effect
task.spawn(function()
    while task.wait(0.01) do
        local color = Color3.fromHSV(tick()%5/5, 0.8, 1)
        fS.Color = color; iS.Color = color; title.TextColor3 = color
    end
end)

icon.MouseButton1Click:Connect(function() frame.Visible = not frame.Visible end)

-- [ BI·∫æN V√Ä TR·∫†NG TH√ÅI ]
local speedValue, jumpValue = 25, 50
local speedEnabled, jumpEnabled = false, false -- Hai c√°i m·ªõi n√® T√∫n
local espPlayer, espNPC, noclip, minimapEnabled = false, false, false, false
local minimapFrame

local function applyStats()
    local char = player.Character
    if char and char:FindFirstChild("Humanoid") then
        local h = char.Humanoid
        h.WalkSpeed = speedEnabled and speedValue or 16
        h.UseJumpPower = true
        h.JumpPower = jumpEnabled and jumpValue or 50
        h.JumpHeight = (jumpEnabled and jumpValue or 50) / 7
    end
end

-- H√†m t·∫°o n√∫t Stats
local function createStat(y,text,getValue,minus,plus)
    local btnFrame = Instance.new("Frame", frame)
    btnFrame.Size = UDim2.new(0.9,0,0,30); btnFrame.Position = UDim2.new(0.05,0,0,y); btnFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)
    Instance.new("UICorner", btnFrame)
	local label = Instance.new("TextLabel",btnFrame); label.Size = UDim2.new(0.6,0,1,0); label.Position = UDim2.new(0,8,0,0); label.BackgroundTransparency = 1; label.TextColor3 = Color3.new(1,1,1); label.TextSize = 12; label.TextXAlignment = Enum.TextXAlignment.Left
	local function update() label.Text = text.." : "..getValue() end
	local m = Instance.new("TextButton",btnFrame); m.Size = UDim2.new(0,22,0,22); m.Position = UDim2.new(1,-52,0,4); m.Text="-"; m.BackgroundColor3 = Color3.fromRGB(50,50,50); m.TextColor3 = Color3.new(1,1,1); Instance.new("UICorner",m)
	local p = Instance.new("TextButton",btnFrame); p.Size = UDim2.new(0,22,0,22); p.Position = UDim2.new(1,-26,0,4); p.Text="+"; p.BackgroundColor3 = Color3.fromRGB(50,50,50); p.TextColor3 = Color3.new(1,1,1); Instance.new("UICorner",p)
	m.MouseButton1Click:Connect(function() minus() update() applyStats() end)
	p.MouseButton1Click:Connect(function() plus() update() applyStats() end)
	update()
end

-- N√∫t g·∫°t (Toggle)
local function toggle(y,name,callback)
	local b=Instance.new("TextButton",frame); b.Size=UDim2.new(0.9,0,0,28); b.Position=UDim2.new(0.05,0,0,y); b.BackgroundColor3 = Color3.fromRGB(35,35,35); b.TextColor3 = Color3.new(1,1,1); b.TextSize = 12
    Instance.new("UICorner", b)
	b.MouseButton1Click:Connect(callback); return b
end

-- Layout Menu
local btnSpeed = toggle(45, "Toggle Speed", function() speedEnabled = not speedEnabled; applyStats() end)
createStat(75,"‚ö° Speed Val", function() return speedValue end, function() speedValue=math.max(16,speedValue-5) end, function() speedValue+=5 end)

local btnJump = toggle(115, "Toggle Jump", function() jumpEnabled = not jumpEnabled; applyStats() end)
createStat(145,"ü¶ò Jump Val", function() return jumpValue end, function() jumpValue=math.max(50,jumpValue-10) end, function() jumpValue+=10 end)

local btnESPPlayer = toggle(190,"ESP Player",function() espPlayer=not espPlayer end)
local btnESPNPC = toggle(222,"ESP NPC",function() espNPC=not espNPC end)
local btnNoclip = toggle(254,"Noclip",function() noclip=not noclip end)
local btnMinimap = toggle(286,"Minimap",function() 
	minimapEnabled = not minimapEnabled
	if minimapEnabled then createMinimap() elseif minimapFrame then minimapFrame:Destroy() end
end)

-- Main Loop
RunService.RenderStepped:Connect(function()
    applyStats()
    btnSpeed.Text = "Speed: "..(speedEnabled and "ON" or "OFF")
    btnJump.Text = "Jump: "..(jumpEnabled and "ON" or "OFF")
	btnESPPlayer.Text="ESP Player: "..(espPlayer and "ON" or "OFF")
	btnESPNPC.Text="ESP NPC: "..(espNPC and "ON" or "OFF")
	btnNoclip.Text="Noclip: "..(noclip and "ON" or "OFF")
	btnMinimap.Text="Minimap: "..(minimapEnabled and "ON" or "OFF")
    
    if noclip and player.Character then
		for _,v in pairs(player.Character:GetDescendants()) do if v:IsA("BasePart") then v.CanCollide=false end end
	end
    
    -- ESP logic (gi·ªØ nguy√™n c·ªßa T√∫n)
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local myRoot = player.Character.HumanoidRootPart
        for _,model in pairs(workspace:GetDescendants()) do
            if model:IsA("Model") and model ~= player.Character and model:FindFirstChildOfClass("Humanoid") then
                local root = model:FindFirstChild("HumanoidRootPart") or model.PrimaryPart
                if root then
                    local isP = Players:GetPlayerFromCharacter(model)
                    local shouldShow = (isP and espPlayer) or (not isP and espNPC)
                    local hl = model:FindFirstChild("ESPHighlight")
                    local tag = root:FindFirstChild("DistanceTag")
                    if shouldShow then
                        if not hl then hl = Instance.new("Highlight", model); hl.Name = "ESPHighlight"; hl.OutlineColor = isP and Color3.new(0,0.7,1) or Color3.new(1,0,0); hl.FillTransparency = 1 end
                        if not tag then
                            tag = Instance.new("BillboardGui", root); tag.Name = "DistanceTag"; tag.Size = UDim2.new(0,100,0,20); tag.StudsOffset = Vector3.new(0,3,0); tag.AlwaysOnTop = true
                            local txt = Instance.new("TextLabel", tag); txt.Size = UDim2.new(1,0,1,0); txt.BackgroundTransparency = 1; txt.TextColor3 = Color3.new(1,1,1); txt.TextScaled = true
                        end
                        tag.TextLabel.Text = math.floor((root.Position - myRoot.Position).Magnitude) .. " m"
                    else if hl then hl:Destroy() end if tag then tag:Destroy() end end
                end
            end
        end
    end
end)

-- Minimap logic (gi·ªØ nguy√™n c·ªßa T√∫n)
function createMinimap()
    -- [ Gi·ªØ nguy√™n code minimap c·ªßa √¥ng ]
	if minimapFrame then minimapFrame:Destroy() end
	minimapFrame = Instance.new("Frame", gui); minimapFrame.Size = UDim2.new(0,150,0,150); minimapFrame.Position = UDim2.new(1,-160,0,10); minimapFrame.BackgroundColor3 = Color3.new(0,0,0); minimapFrame.BackgroundTransparency = 0.5
	Instance.new("UICorner", minimapFrame).CornerRadius = UDim.new(1,0)
    local mmStroke = Instance.new("UIStroke", minimapFrame); mmStroke.Color = Color3.new(1,1,1); mmStroke.Thickness = 2
	local selfDot = Instance.new("Frame", minimapFrame); selfDot.Name = "Self"; selfDot.Size = UDim2.new(0,8,0,8); selfDot.BackgroundColor3 = Color3.new(0,1,0); selfDot.Position = UDim2.new(0.5,-4,0.5,-4); selfDot.ZIndex = 5; Instance.new("UICorner", selfDot)

	RunService.RenderStepped:Connect(function()
		if not minimapEnabled or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
		local root = player.Character.HumanoidRootPart
		for _, v in pairs(minimapFrame:GetChildren()) do if v.Name == "Dot" then v:Destroy() end end
		local camCF = CFrame.new(root.Position, root.Position + Vector3.new(camera.CFrame.LookVector.X, 0, camera.CFrame.LookVector.Z))
		for _, model in pairs(workspace:GetDescendants()) do
			if model:IsA("Model") and model ~= player.Character and model:FindFirstChildOfClass("Humanoid") then
				local oRoot = model:FindFirstChild("HumanoidRootPart") or model.PrimaryPart
				if oRoot then
					local dist = (oRoot.Position - root.Position).Magnitude
					if dist < 400 then
						local relativePos = camCF:PointToObjectSpace(oRoot.Position)
						local x = relativePos.X / 6
						local z = relativePos.Z / 6
						local dot = Instance.new("Frame", minimapFrame)
						dot.Name = "Dot"; dot.Size = UDim2.new(0,6,0,6)
                        local checkP = Players:GetPlayerFromCharacter(model)
						dot.BackgroundColor3 = checkP and Color3.new(0,0.5,1) or Color3.new(1,0,0)
						dot.Position = UDim2.new(0.5, x-3, 0.5, z-3)
						Instance.new("UICorner", dot)
					end
				end
			end
		end
	end)
end
